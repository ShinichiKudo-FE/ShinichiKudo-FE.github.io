<!DOCTYPE html>
<html lang="zh-Hans">


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    ä½ çœŸçš„äº†è§£setStateå—ï¼Ÿ | é»˜é»˜é»˜é»˜ç‡ƒ
  </title>
  <meta name="description" content="ä¸€æšå‰ç«¯æ¬ç –é˜Ÿé˜Ÿå‘˜çš„è®°å½•å†Œ">
  
  <meta name="keywords" content="
  React
  ">
  
  <meta name="author" content="å¼ ç™½å‘Šä¸¶">

  <meta http-equiv="Cache-Control" content="no-transform"/>
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="theme-color" content="#1e2327">
  <link rel="apple-touch-icon" href="https://github.githubassets.com/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://github.githubassets.com/apple-touch-icon-180x180.png">

  <link rel="icon" type="image/x-icon" href="https://github.githubassets.com/favicon.ico">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  

  

  <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
</head>

<body id="replica-app">

<nav class="navbar-wrapper">
  <div class="navbar">
    <div class="container clearfix">
      <a href="/" class="navbar-logo"><i class="fa fa-github"></i></a>

      <div class="navbar-search float-left desktop-only">
        <div class="navbar-search-form">
          <label for="gsc-i-id1">This website</label>
          <div id="google-search">
            <gcse:search></gcse:search>
          </div>
        </div>
      </div>

      <ul class="navbar-nav float-left">
        
        <li><a href="/archives">Archives</a></li>
        
        
        <li><a href="/categories">Categories</a></li>
        
        
        <li><a href="/tags">Tags</a></li>
        
        
        <li class="desktop-only"><a href="/atom.xml" target="_blank">RSS</a></li>
        
      </ul>

      <ul class="navbar-nav user-nav float-right desktop-only">
        <li class="user-nav-notification">
          <a><span class="user-nav-unread"></span><i class="fa fa-bell"></i></a>
        </li>
        <li>
          <a><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></a>
        </li>
        <li class="user-nav-logo">
          <a><img src="https://octodex.github.com/images/baracktocat.jpg"> <i class="fa fa-caret-down"></i></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="main-container">
  <header class="header-wrapper desktop-only">
  <div class="container header-site-detail">
    <ul class="header-toolbar">
      <li class="clearfix">
        <a href="/archives" class="header-toolbar-left"><i
                  class="fa fa-file-text"></i> Posts </a>
        <a href="/archives"
           class="header-toolbar-right"> 147 </a>
      </li>
      <li>
        <a href="/tags" class="header-toolbar-left"><i
                  class="fa fa-tags"></i> Tags </a>
        <a href="/tags"
           class="header-toolbar-right"> 47 </a>
      </li>
      <li>
        <a href="/categories" class="header-toolbar-left"><i
                  class="fa fa-folder-open"></i> Categories </a>
        <a href="/categories"
           class="header-toolbar-right"> 23 </a>
      </li>
    </ul>
    <h2 class="header-title">
      <i class="fa fa-book text-muted"></i>
      <a href="/">é»˜é»˜é»˜é»˜ç‡ƒ</a>
      
      
    </h2>
  </div>

  <div class="container">
    <div class="header-tab-wrapper clearfix">
      <span class="header-tab header-tab-selected"><i class="fa fa-thumbs-o-up"></i> Like</span>
      <span class="header-tab"><i class="fa fa-share-alt"></i> Share</span>
      <span class="header-tab"><i class="fa fa-comments-o"></i> Discussion</span>
      <span class="header-tab"><i class="fa fa-bookmark-o"></i> Bookmark </span>
      <span class="header-tab"><i class="fa fa-smile-o"></i> Smile <i class="fa fa-caret-down"></i></span>
    </div>
  </div>
</header>


<div class="post-container container">
  <h3>
    <i class="fa fa-user-o"></i>
    å¼ ç™½å‘Šä¸¶

    <span class="post-date float-right" title="{{moment(1531990497000).format('MMM DD, YYYY, h:mm:ss A')}}">
      
          <i class="fa fa-pencil-square-o"></i>
      
      {{moment(1531990497000).fromNow()}}
    </span>
  </h3>

  <article class="post-content">
    <h1>ä½ çœŸçš„äº†è§£setStateå—ï¼Ÿ</h1>
    <p><img src="https://user-gold-cdn.xitu.io/2018/7/11/16488940d3621cc9?imageView2/1/w/1304/h/734/q/85/format/webp/interlace/1" alt="setState"></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>çœ‹ä¹‹å‰ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£å’Œç®€åŒ–æµç¨‹ï¼Œæˆ‘ä»¬é»˜è®¤reactå†…éƒ¨ä»£ç æ‰§è¡Œåˆ° <strong>performWorkã€performWorkOnRootã€performSyncWorkã€performAsyncWork</strong> è¿™å››ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå°±æ˜¯reactå»updateæ›´æ–°å¹¶ä¸”ä½œç”¨åˆ°UIä¸Šã€‚</p>
<h2 id="åˆæˆäº‹ä»¶ä¸­çš„setState"><a href="#åˆæˆäº‹ä»¶ä¸­çš„setState" class="headerlink" title="åˆæˆäº‹ä»¶ä¸­çš„setState"></a>åˆæˆäº‹ä»¶ä¸­çš„setState</h2><p>é¦–å…ˆå¾—äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯<code>åˆæˆäº‹ä»¶</code>ï¼Œreactä¸ºäº†è§£å†³è·¨å¹³å°ï¼Œå…¼å®¹æ€§é—®é¢˜ï¼Œè‡ªå·±å°è£…äº†ä¸€å¥—äº‹ä»¶æœºåˆ¶ï¼Œä»£ç†äº†åŸç”Ÿçš„äº‹ä»¶ï¼Œåƒåœ¨jsxä¸­å¸¸è§çš„<code>onClick</code>ã€<code>onChange</code>è¿™äº›éƒ½æ˜¯åˆæˆäº‹ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123; <span class="attr">val</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">  increment = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val) <span class="comment">// è¾“å‡ºçš„æ˜¯æ›´æ–°å‰çš„val --&gt; 0</span></span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div onClick=&#123;<span class="keyword">this</span>.increment&#125;&gt;</span><br><span class="line">        &#123;<span class="string">`Counter is: <span class="subst">$&#123;<span class="keyword">this</span>.state.val&#125;</span>`</span>&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åˆæˆäº‹ä»¶ä¸­çš„<code>setState</code>å†™æ³•æ¯”è¾ƒå¸¸è§ï¼Œç‚¹å‡»äº‹ä»¶é‡Œå»æ”¹å˜ <code>this.state.val</code> çš„çŠ¶æ€å€¼ï¼Œåœ¨ <code>increment</code> äº‹ä»¶ä¸­æ‰“ä¸ªæ–­ç‚¹å¯ä»¥çœ‹åˆ°è°ƒç”¨æ ˆï¼Œè¿™é‡Œæˆ‘è´´ä¸€å¼ è‡ªå·±ç”»çš„æµç¨‹å›¾ï¼š<br><a id="more"></a><br><img src="https://user-gold-cdn.xitu.io/2018/7/11/164888c0fb049aef?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="åˆæˆäº‹ä»¶"></p>
<p>ä» <code>dispatchInteractiveEvent</code> åˆ° <code>callCallBack</code> ä¸ºæ­¢ï¼Œéƒ½æ˜¯å¯¹åˆæˆäº‹ä»¶çš„å¤„ç†å’Œæ‰§è¡Œï¼Œä» <code>setState</code> åˆ° requestWork æ˜¯è°ƒç”¨ <code>this.setState</code> çš„é€»è¾‘ï¼Œè¿™è¾¹ä¸»è¦çœ‹ä¸‹ <code>requestWork</code> è¿™ä¸ªå‡½æ•°ï¼ˆä» <code>dispatchEvent</code> åˆ° <code>requestWork</code> çš„è°ƒç”¨æ ˆæ˜¯å±äº <code>interactiveUpdates$1</code> çš„ stry ä»£ç å—ï¼Œä¸‹æ–‡ä¼šæåˆ°ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">requestWork</span>(<span class="params">root, expirationTime</span>) </span>&#123;</span><br><span class="line">  addRootToSchedule(root, expirationTime);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isRendering) &#123;</span><br><span class="line">    <span class="comment">// Prevent reentrancy. Remaining work will be scheduled at the end of</span></span><br><span class="line">    <span class="comment">// the currently rendering batch.</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isBatchingUpdates) &#123;</span><br><span class="line">    <span class="comment">// Flush work at the end of the batch.</span></span><br><span class="line">    <span class="keyword">if</span> (isUnbatchingUpdates) &#123;</span><br><span class="line">      <span class="comment">// ...unless we're inside unbatchedUpdates, in which case we should</span></span><br><span class="line">      <span class="comment">// flush it now.</span></span><br><span class="line">      nextFlushedRoot = root;</span><br><span class="line">      nextFlushedExpirationTime = Sync;</span><br><span class="line">      performWorkOnRoot(root, Sync, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> Get rid of Sync and use current time?</span></span><br><span class="line">  <span class="keyword">if</span> (expirationTime === Sync) &#123;</span><br><span class="line">    performSyncWork();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    scheduleCallbackWithExpiration(expirationTime);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>requestWork</code> ä¸­æœ‰ä¸‰ä¸ªifåˆ†æ”¯ï¼Œä¸‰ä¸ªåˆ†æ”¯ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³• <code>performWorkOnRoot</code> å’Œ <code>performSyncWork</code> ï¼Œå°±æ˜¯æˆ‘ä»¬é»˜è®¤çš„updateå‡½æ•°ï¼Œä½†æ˜¯åœ¨åˆæˆäº‹ä»¶ä¸­ï¼Œèµ°çš„æ˜¯ç¬¬äºŒä¸ªifåˆ†æ”¯ï¼Œç¬¬äºŒä¸ªåˆ†æ”¯ä¸­æœ‰ä¸¤ä¸ªæ ‡è¯† <code>isBatchingUpdates</code> å’Œ <code>isUnbatchingUpdates</code> ä¸¤ä¸ªåˆå§‹å€¼éƒ½ä¸º  <strong>false</strong> ï¼Œä½†æ˜¯åœ¨ <code>interactiveUpdates$1</code> ä¸­ä¼šæŠŠ <code>isBatchingUpdates</code> è®¾ä¸º <strong>true</strong> ï¼Œä¸‹é¢å°±æ˜¯ <code>interactiveUpdates$1</code> çš„ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">interactiveUpdates$1</span>(<span class="params">fn, a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isBatchingInteractiveUpdates) &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(a, b);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// If there are any pending interactive updates, synchronously flush them.</span></span><br><span class="line">  <span class="comment">// This needs to happen before we read any handlers, because the effect of</span></span><br><span class="line">  <span class="comment">// the previous event may influence which handlers are called during</span></span><br><span class="line">  <span class="comment">// this event.</span></span><br><span class="line">  <span class="keyword">if</span> (!isBatchingUpdates &amp;&amp; !isRendering &amp;&amp; lowestPendingInteractiveExpirationTime !== NoWork) &#123;</span><br><span class="line">    <span class="comment">// Synchronously flush pending interactive updates.</span></span><br><span class="line">    performWork(lowestPendingInteractiveExpirationTime, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    lowestPendingInteractiveExpirationTime = NoWork;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> previousIsBatchingInteractiveUpdates = isBatchingInteractiveUpdates;</span><br><span class="line">  <span class="keyword">var</span> previousIsBatchingUpdates = isBatchingUpdates;</span><br><span class="line">  isBatchingInteractiveUpdates = <span class="literal">true</span>;</span><br><span class="line">  isBatchingUpdates = <span class="literal">true</span>;  <span class="comment">// æŠŠrequestWorkä¸­çš„isBatchingUpdatesæ ‡è¯†æ”¹ä¸ºtrue</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(a, b);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    isBatchingInteractiveUpdates = previousIsBatchingInteractiveUpdates;</span><br><span class="line">    isBatchingUpdates = previousIsBatchingUpdates;</span><br><span class="line">    <span class="keyword">if</span> (!isBatchingUpdates &amp;&amp; !isRendering) &#123;</span><br><span class="line">      performSyncWork();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æŠŠ <code>isBatchingUpdates</code> è®¾ä¸ºäº† true ,å¯¼è‡´åœ¨ <code>requestWork</code> æ–¹æ³•ä¸­ï¼Œ <code>isBatchingUpdates</code> ä¸º true ï¼Œä½†æ˜¯ <code>isUnbatchingUpdates</code> æ˜¯ false ï¼Œè€Œè¢«ç›´æ¥returnäº†ã€‚</p>
<p>é‚£returnå®Œçš„é€»è¾‘å›åˆ°å“ªé‡Œå‘¢ï¼Œæœ€ç»ˆæ­£æ˜¯å›åˆ°äº† <code>interactiveUpdates</code> è¿™ä¸ªæ–¹æ³•ï¼Œä»”ç»†çœ‹ä¸€çœ¼ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢æœ‰ä¸ª <strong>try finally</strong>è¯­æ³•ï¼Œå‰ç«¯åŒå­¦è¿™ä¸ªå…¶å®æ˜¯ç”¨çš„æ¯”è¾ƒå°‘çš„ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¼šå…ˆæ‰§è¡Œ try ä»£ç å—ä¸­çš„è¯­å¥ï¼Œç„¶åå†æ‰§è¡Œ finally ä¸­çš„ä»£ç ï¼Œè€Œ fn(a, b) æ˜¯åœ¨tryä»£ç å—ä¸­ï¼Œåˆšæ‰è¯´åˆ°åœ¨ <code>requestWork</code> ä¸­è¢«returnæ‰çš„ä¹Ÿå°±æ˜¯è¿™ä¸ªfnï¼ˆä¸Šæ–‡æåˆ°çš„ ä»<code>dispatchEvent</code> åˆ° <code>requestWork</code> çš„ä¸€æ•´ä¸ªè°ƒç”¨æ ˆï¼‰ã€‚</p>
<p>æ‰€ä»¥å½“ä½ åœ¨ <code>increment</code> ä¸­è°ƒç”¨ <code>setState</code> ä¹‹åå»console.logçš„æ—¶å€™ï¼Œæ˜¯å±äº try ä»£ç å—ä¸­çš„æ‰§è¡Œï¼Œä½†æ˜¯ç”±äºæ˜¯åˆæˆäº‹ä»¶ï¼Œtryä»£ç å—æ‰§è¡Œå®Œstateå¹¶æ²¡æœ‰æ›´æ–°ï¼Œæ‰€ä»¥ä½ è¾“å…¥çš„ç»“æœæ˜¯æ›´æ–°å‰çš„ state å€¼ï¼Œè¿™å°±å¯¼è‡´äº†æ‰€è°“çš„â€å¼‚æ­¥â€ï¼Œä½†æ˜¯å½“ä½ çš„tryä»£ç å—æ‰§è¡Œå®Œçš„æ—¶å€™ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„incrementåˆæˆäº‹ä»¶ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ä¼šå»æ‰§è¡Œ finally é‡Œçš„ä»£ç ï¼Œåœ¨ finally ä¸­æ‰§è¡Œäº† <code>performSyncWork</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™æ‰ä¼šå»æ›´æ–°ä½ çš„ state å¹¶ä¸”æ¸²æŸ“åˆ°UIä¸Šã€‚</p>
<h2 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„setState"><a href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„setState" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„setState"></a>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„setState</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123; <span class="attr">val</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"> componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val) <span class="comment">// è¾“å‡ºçš„è¿˜æ˜¯æ›´æ–°å‰çš„å€¼ --&gt; 0</span></span><br><span class="line"> &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="string">`Counter is: <span class="subst">$&#123;<span class="keyword">this</span>.state.val&#125;</span>`</span>&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é’©å­å‡½æ•°ä¸­<code>setState</code>çš„è°ƒç”¨æ ˆï¼š</p>
</blockquote>
<p><img src="https://user-gold-cdn.xitu.io/2018/7/11/164888cef54b5edd?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="é’©å­å‡½æ•°"></p>
<p>å…¶å®è¿˜æ˜¯å’Œåˆæˆäº‹ä»¶ä¸€æ ·ï¼Œå½“ <code>componentDidmount</code> æ‰§è¡Œçš„æ—¶å€™ï¼Œreactå†…éƒ¨å¹¶æ²¡æœ‰æ›´æ–°ï¼Œæ‰§è¡Œå®Œ<code>componentDidmount</code>  åæ‰å» <code>commitUpdateQueue</code> æ›´æ–°ã€‚è¿™å°±å¯¼è‡´ä½ åœ¨ <code>componentDidmount</code> ä¸­ <code>setState</code> å®Œå»<code>console.log</code>æ‹¿çš„ç»“æœè¿˜æ˜¯æ›´æ–°å‰çš„å€¼ã€‚</p>
<h2 id="åŸç”Ÿäº‹ä»¶ä¸­çš„setState"><a href="#åŸç”Ÿäº‹ä»¶ä¸­çš„setState" class="headerlink" title="åŸç”Ÿäº‹ä»¶ä¸­çš„setState"></a>åŸç”Ÿäº‹ä»¶ä¸­çš„setState</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123; <span class="attr">val</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">  changeValue = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val) <span class="comment">// è¾“å‡ºçš„æ˜¯æ›´æ–°åçš„å€¼ --&gt; 1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, <span class="keyword">this</span>.changeValue, <span class="literal">false</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="string">`Counter is: <span class="subst">$&#123;<span class="keyword">this</span>.state.val&#125;</span>`</span>&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åŸç”Ÿäº‹ä»¶æ˜¯æŒ‡é<code>react</code>åˆæˆäº‹ä»¶ï¼ŒåŸç”Ÿè‡ªå¸¦çš„äº‹ä»¶ç›‘å¬ <code>addEventListener</code> ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç”¨åŸç”Ÿjsã€jqç›´æ¥ <code>document.querySelector().onclick</code> è¿™ç§ç»‘å®šäº‹ä»¶çš„å½¢å¼éƒ½å±äºåŸç”Ÿäº‹ä»¶ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/7/11/164888d958a2df16?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="åŸç”Ÿäº‹ä»¶"></p>
<p>åŸç”Ÿäº‹ä»¶çš„è°ƒç”¨æ ˆå°±æ¯”è¾ƒç®€å•äº†ï¼Œå› ä¸ºæ²¡æœ‰èµ°åˆæˆäº‹ä»¶çš„é‚£ä¸€å¤§å †ï¼Œç›´æ¥è§¦å‘clickäº‹ä»¶ï¼Œåˆ° <code>requestWork</code> ,åœ¨<code>requestWork</code>é‡Œç”±äº <code>expirationTime === Sync</code> çš„åŸå› ï¼Œç›´æ¥èµ°äº† <code>performSyncWork</code> å»æ›´æ–°ï¼Œå¹¶ä¸åƒåˆæˆäº‹ä»¶æˆ–é’©å­å‡½æ•°ä¸­è¢«returnï¼Œæ‰€ä»¥å½“ä½ åœ¨åŸç”Ÿäº‹ä»¶ä¸­<code>setState</code>åï¼Œèƒ½åŒæ­¥æ‹¿åˆ°æ›´æ–°åçš„stateå€¼ã€‚</p>
<h2 id="setTimeoutä¸­çš„setState"><a href="#setTimeoutä¸­çš„setState" class="headerlink" title="setTimeoutä¸­çš„setState"></a>setTimeoutä¸­çš„setState</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123; <span class="attr">val</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"> componentDidMount() &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val) <span class="comment">// è¾“å‡ºæ›´æ–°åçš„å€¼ --&gt; 1</span></span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="string">`Counter is: <span class="subst">$&#123;<span class="keyword">this</span>.state.val&#125;</span>`</span>&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>setTimeout</code> ä¸­å» <code>setState</code> å¹¶ä¸ç®—æ˜¯ä¸€ä¸ªå•ç‹¬çš„åœºæ™¯ï¼Œå®ƒæ˜¯éšç€ä½ å¤–å±‚å»å†³å®šçš„ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨åˆæˆäº‹ä»¶ä¸­ <code>setTimeout</code> ï¼Œå¯ä»¥åœ¨é’©å­å‡½æ•°ä¸­ <code>setTimeout</code> ï¼Œä¹Ÿå¯ä»¥åœ¨åŸç”Ÿäº‹ä»¶<code>setTimeout</code>ï¼Œä½†æ˜¯ä¸ç®¡æ˜¯å“ªä¸ªåœºæ™¯ä¸‹ï¼ŒåŸºäº <strong>event loop</strong>çš„æ¨¡å‹ä¸‹ï¼Œ <code>setTimeout</code> ä¸­é‡Œå» <code>setState</code> æ€»èƒ½æ‹¿åˆ°æœ€æ–°çš„<code>state</code>å€¼ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼Œæ¯”å¦‚ä¹‹å‰çš„åˆæˆäº‹ä»¶ï¼Œç”±äºä½ æ˜¯ <code>setTimeout(_ =&gt; { this.setState()}, 0)</code> æ˜¯åœ¨ try ä»£ç å—ä¸­,å½“ä½  try ä»£ç å—æ‰§è¡Œåˆ° <code>setTimeout</code> çš„æ—¶å€™ï¼ŒæŠŠå®ƒä¸¢åˆ°åˆ—é˜Ÿé‡Œï¼Œå¹¶æ²¡æœ‰å»æ‰§è¡Œï¼Œè€Œæ˜¯å…ˆæ‰§è¡Œçš„ <code>finally</code> ä»£ç å—ï¼Œç­‰ finally æ‰§è¡Œå®Œäº†ï¼Œ <code>isBatchingUpdates</code> åˆå˜ä¸ºäº† false ï¼Œå¯¼è‡´æœ€åå»æ‰§è¡Œé˜Ÿåˆ—é‡Œçš„ setState æ—¶å€™ï¼Œ <code>requestWork</code> èµ°çš„æ˜¯å’ŒåŸç”Ÿäº‹ä»¶ä¸€æ ·çš„ <code>expirationTime === Sync if</code>åˆ†æ”¯ï¼Œæ‰€ä»¥è¡¨ç°å°±ä¼šå’ŒåŸç”Ÿäº‹ä»¶ä¸€æ ·ï¼Œå¯ä»¥åŒæ­¥æ‹¿åˆ°æœ€æ–°çš„stateå€¼ã€‚</p>
<h2 id="setStateä¸­çš„æ‰¹é‡æ›´æ–°"><a href="#setStateä¸­çš„æ‰¹é‡æ›´æ–°" class="headerlink" title="setStateä¸­çš„æ‰¹é‡æ›´æ–°"></a>setStateä¸­çš„æ‰¹é‡æ›´æ–°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123; <span class="attr">val</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">  batchUpdates = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div onClick=&#123;<span class="keyword">this</span>.batchUpdates&#125;&gt;</span><br><span class="line">        &#123;<span class="string">`Counter is <span class="subst">$&#123;<span class="keyword">this</span>.state.val&#125;</span>`</span>&#125; <span class="comment">// 1</span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ç»“æœæœ€ç»ˆæ˜¯1ï¼Œåœ¨ <code>setState</code> çš„æ—¶å€™reactå†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ª <code>updateQueue</code> ï¼Œé€šè¿‡ <code>firstUpdate</code> ã€ <code>lastUpdate</code> ã€ <code>lastUpdate.next</code> å»ç»´æŠ¤ä¸€ä¸ªæ›´æ–°çš„é˜Ÿåˆ—ï¼Œåœ¨æœ€ç»ˆçš„ <code>performWork</code> ä¸­ï¼Œç›¸åŒçš„keyä¼šè¢«è¦†ç›–ï¼Œåªä¼šå¯¹æœ€åä¸€æ¬¡çš„ <code>setState</code> è¿›è¡Œæ›´æ–°ï¼Œä¸‹é¢æ˜¯éƒ¨åˆ†å®ç°ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUpdateQueue</span>(<span class="params">baseState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> queue = &#123;</span><br><span class="line">    expirationTime: NoWork,</span><br><span class="line">    baseState: baseState,</span><br><span class="line">    firstUpdate: <span class="literal">null</span>,</span><br><span class="line">    lastUpdate: <span class="literal">null</span>,</span><br><span class="line">    firstCapturedUpdate: <span class="literal">null</span>,</span><br><span class="line">    lastCapturedUpdate: <span class="literal">null</span>,</span><br><span class="line">    firstEffect: <span class="literal">null</span>,</span><br><span class="line">    lastEffect: <span class="literal">null</span>,</span><br><span class="line">    firstCapturedEffect: <span class="literal">null</span>,</span><br><span class="line">    lastCapturedEffect: <span class="literal">null</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> queue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendUpdateToQueue</span>(<span class="params">queue, update, expirationTime</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Append the update to the end of the list.</span></span><br><span class="line">  <span class="keyword">if</span> (queue.lastUpdate === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// Queue is empty</span></span><br><span class="line">    queue.firstUpdate = queue.lastUpdate = update;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    queue.lastUpdate.next = update;</span><br><span class="line">    queue.lastUpdate = update;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (queue.expirationTime === NoWork || queue.expirationTime &gt; expirationTime) &#123;</span><br><span class="line">    <span class="comment">// The incoming update has the earliest expiration of any update in the</span></span><br><span class="line">    <span class="comment">// queue. Update the queue's expiration time.</span></span><br><span class="line">    queue.expirationTime = expirationTime;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸ªğŸŒ°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">val</span>: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val)</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">val</span>: <span class="keyword">this</span>.state.val + <span class="number">1</span> &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.val)</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.val&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“åˆä¸Šé¢åˆ†æçš„ï¼Œé’©å­å‡½æ•°ä¸­çš„ <code>setState</code> æ— æ³•ç«‹é©¬æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œæ‰€ä»¥å‰ä¸¤æ¬¡éƒ½æ˜¯è¾“å‡º0ï¼Œå½“æ‰§è¡Œåˆ° <code>setTimeout</code> é‡Œçš„æ—¶å€™ï¼Œå‰é¢ä¸¤ä¸ªstateçš„å€¼å·²ç»è¢«æ›´æ–°ï¼Œç”±äº setState æ‰¹é‡æ›´æ–°çš„ç­–ç•¥ï¼Œ <code>this.state.val</code> åªå¯¹æœ€åä¸€æ¬¡çš„ç”Ÿæ•ˆï¼Œä¸º1ï¼Œè€Œåœ¨ setTimmout ä¸­ setState æ˜¯å¯ä»¥åŒæ­¥æ‹¿åˆ°æ›´æ–°ç»“æœï¼Œæ‰€ä»¥ setTimeout ä¸­çš„ä¸¤æ¬¡è¾“å‡º2ï¼Œ3ï¼Œæœ€ç»ˆç»“æœå°±ä¸º 0, 0, 2, 3 ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li><p>setState åªåœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ˜¯â€œå¼‚æ­¥â€çš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’Œ <code>setTimeout</code> ä¸­éƒ½æ˜¯åŒæ­¥çš„ã€‚</p>
</li>
<li><p>setStateçš„â€œå¼‚æ­¥â€å¹¶ä¸æ˜¯è¯´å†…éƒ¨ç”±å¼‚æ­¥ä»£ç å®ç°ï¼Œå…¶å®æœ¬èº«æ‰§è¡Œçš„è¿‡ç¨‹å’Œä»£ç éƒ½æ˜¯åŒæ­¥çš„ï¼Œåªæ˜¯åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°çš„è°ƒç”¨é¡ºåºåœ¨æ›´æ–°ä¹‹å‰ï¼Œå¯¼è‡´åœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ²¡æ³•ç«‹é©¬æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œå½¢å¼äº†æ‰€è°“çš„â€œå¼‚æ­¥â€ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° <code>setState(partialState, callback)</code> ä¸­çš„callbackæ‹¿åˆ°æ›´æ–°åçš„ç»“æœã€‚</p>
</li>
<li><p>setState çš„æ‰¹é‡æ›´æ–°ä¼˜åŒ–ä¹Ÿæ˜¯å»ºç«‹åœ¨â€œå¼‚æ­¥â€ï¼ˆåˆæˆäº‹ä»¶ã€é’©å­å‡½æ•°ï¼‰ä¹‹ä¸Šçš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’ŒsetTimeout ä¸­ä¸ä¼šæ‰¹é‡æ›´æ–°ï¼Œåœ¨â€œå¼‚æ­¥â€ä¸­å¦‚æœå¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œå¤šæ¬¡ setState ï¼Œ setState çš„æ‰¹é‡æ›´æ–°ç­–ç•¥ä¼šå¯¹å…¶è¿›è¡Œè¦†ç›–ï¼Œå–æœ€åä¸€æ¬¡çš„æ‰§è¡Œï¼Œå¦‚æœæ˜¯åŒæ—¶ setState å¤šä¸ªä¸åŒçš„å€¼ï¼Œåœ¨æ›´æ–°æ—¶ä¼šå¯¹å…¶è¿›è¡Œåˆå¹¶æ‰¹é‡æ›´æ–°ã€‚</p>
</li>
</ul>
<p><a href="https://juejin.im/post/5b45c57c51882519790c7441#comment" target="_blank" rel="noopener">åŸæ–‡åœ°å€</a></p>

  </article>
</div>


    




</div>

<div class="footer-wrapper container">
  <footer class="footer clearfix">
    <div class="clearfix">
    <a href="https://zhanghao-web.github.io" class="footer-logo">
      <i class="fa fa-github"></i>
    </a>
    <ul class="footer-social-link">
      <li>Â© 2019 å¼ ç™½å‘Šä¸¶</li>
      <li><a href="https://zhanghao-web.github.io">Home</a></li>
      
    </ul>
    <div class="footer-theme-info">
      Theme <a href="//github.com/sabrinaluo/hexo-theme-replica">Replica</a>
      by <a href="//github.com/sabrinaluo">Hiitea</a> â¤ Powered by Hexo
    </div>
    </div>
    
  </footer>
</div>




<script src="/js/main.js"></script>

</body>
</html>
