---
title: 'é€šè¿‡ç¤ºä¾‹æ¥å­¦ä¹ ES2016, 2017, 2018çš„æ–°ç‰¹æ€§'
date: 2018-07-17 18:27:44
tags: "ES6"
categories: "Js"
---
![es678](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/es_16_17_18.png)

# å‰è¨€

æœ¬æ–‡ä¼šè¾…ä»¥æœ‰ç”¨çš„ä¾‹å­æ¥è®²è¿°TC39ä¸­çš„18ä¸ªç‰¹æ€§ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨ES2016, ES2017å’ŒES2018ä¸­åŠ å…¥ã€‚
é‰´äºæœ¬æ–‡å†…å®¹å¾ˆé•¿ï¼Œæˆ‘ä»¬å°†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†æ¥ä»‹ç»ï¼Œæ­¤ä¸ºç¬¬ä¸€éƒ¨åˆ†ã€‚

## ES6

### Array.prototype.includes

includesæ˜¯ä¸€ä¸ªArrayä¸Šå¾ˆæœ‰ç”¨çš„å‡½æ•°ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ã€‚(åŒ…æ‹¬NaNï¼Œæ‰€ä»¥å’ŒindexOfä¸ä¸€æ ·)ã€‚

![includes](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/includes.png)

### æŒ‡æ•°å‡½æ•°çš„ä¸­ç¼€å½¢å¼

åŠ /å‡æ³•æˆ‘ä»¬é€šå¸¸éƒ½æ˜¯ç”¨å…¶ä¸­ç¼€å½¢å¼ï¼Œç›´è§‚æ˜“æ‡‚ã€‚åœ¨ECMAScript2016ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`**`æ¥æ›¿ä»£`Math.pow`ã€‚

![pow](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/pow.png)
<!-- more -->

## ES7

### Object.values()

`Object.values()`å‡½æ•°å’Œ`Object.keys()`å¾ˆç›¸ä¼¼ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ä¸­è‡ªå·±å±æ€§çš„æ‰€æœ‰å€¼(é€šè¿‡åŸå‹é“¾ç»§æ‰¿çš„ä¸ç®—)ã€‚

![objvalues](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/objvalues.png)

### Object.entries()

`Object.entries()`å’Œ`Object.keys`ç›¸å…³ï¼Œä¸è¿‡entries()å‡½æ•°ä¼šå°†keyå’Œvalueä»¥æ•°ç»„çš„å½¢å¼éƒ½è¿”å›ã€‚è¿™æ ·ï¼Œä½¿ç”¨å¾ªç¯æˆ–åˆ™å°†å¯¹è±¡è½¬ä¸ºMapå°±å¾ˆæ–¹ä¾¿äº†ã€‚

![objentry1](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/objentry1.png)

![objentry2](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/objentry2.png)

### å­—ç¬¦ä¸²è¿½åŠ 

æä¾›äº†ä¸¤ä¸ªå­—ç¬¦ä¸²è¿½åŠ çš„æ–¹æ³•`String.prototype.padStart`å’Œ`String.prototype.padEnd`ï¼Œæ–¹ä¾¿æˆ‘ä»¬å°†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²è¿½åŠ åˆ°æŸä¸ªå­—ç¬¦ä¸²çš„å¤´å°¾ã€‚

```js
'someString'.padStart(numberOfCharcters [,stringForPadding]);
'5'.padStart(10) // '          5'
'5'.padStart(10, '=*') //'=*=*=*=*=5'
'5'.padEnd(10) // '5         '
'5'.padEnd(10, '=*') //'5=*=*=*=*='
```

è¿™ä¸ªå¯¹äºæ ¼å¼åŒ–è¾“å‡ºå¾ˆæœ‰ç”¨ï¼

#### padStartä¾‹å­

æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸åŒé•¿åº¦å…ƒç´ çš„æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥å¾€å‰é¢è¿½åŠ 0æ¥ä½¿å¾—ä»–ä»¬æ‰“å°çš„é•¿åº¦éƒ½ä¸º10ã€‚

![padStart](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/padStart.png)

#### padEndä¾‹å­

![padEndä¾‹å­](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/padEnd.png)

```js
const cars = {
  'ğŸš™BMW': '10',
  'ğŸš˜Tesla': '5',
  'ğŸš–Lamborghini': '0'
}
Object.entries(cars).map(([name, count]) => {
  //padEnd appends ' -' until the name becomes 20 characters
  //padStart prepends '0' until the count becomes 3 characters.
  console.log(`${name.padEnd(20, ' -')} Count: ${count.padStart(3, '0')}`)
});
//Prints..
// ğŸš™BMW - - - - - - -  Count: 010
// ğŸš˜Tesla - - - - - -  Count: 005
// ğŸš–Lamborghini - - -  Count: 000

```

#### ä½¿ç”¨padStartå’ŒpadEndæ¥æ ¼å¼åŒ–Emojiså’Œå…¶ä»–å®½å­—ç¬¦

Emojiså’Œå®½å­—ç¬¦ä½¿ç”¨å¤šä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œå› æ­¤å¯èƒ½ä½¿ç”¨padStartå’ŒpadEndçš„ç»“æœå¹¶éå¦‚ä½ æ‰€æ„¿ã€‚

æ¯”å¦‚ï¼šæˆ‘ä»¬è¿½åŠ â¤ï¸åˆ°heartå‰é¢ï¼š

```js
//ä½ ä¼šå‘ç°ä¸ä»…æ²¡æœ‰5ä¸ªæ¡ƒå¿ƒï¼Œæœ‰ä¸€ä¸ªæ¡ƒå¿ƒè¿˜å¾ˆå¥‡æ€ªã€‚
'heart'.padStart(10, "â¤ï¸"); // prints.. 'â¤ï¸â¤ï¸â¤heart'
```

è¿™æ˜¯å› ä¸ºâ¤ï¸å æœ‰2ä¸ªå­—èŠ‚(â€˜\u2764\uFE0Fâ€™)ï¼Œè€Œheartæœ¬èº«æœ‰5ä¸ªå­—èŠ‚ï¼Œå› æ­¤åªæœ‰5ä¸ªå­—èŠ‚çš„ä½™åœ°ã€‚æ‰€ä»¥åªæ˜¯è¿½åŠ äº†2ä¸ªåŠçš„æ¡ƒå¿ƒã€‚æœ€åè¿½åŠ çš„â€™\u2764â€™ä¼šæ˜¾ç¤ºä¸ºå°é»‘æ¡ƒå¿ƒã€‚

### Object.getOwnPropertyDescriptors

è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œç”šè‡³åŒ…æ‹¬get/setå‡½æ•°ã€‚ES2017åŠ å…¥è¿™ä¸ªå‡½æ•°çš„ä¸»è¦åŠ¨æœºåœ¨äºæ–¹ä¾¿å°†ä¸€ä¸ªå¯¹è±¡æ·±åº¦æ‹·è´ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶å¯ä»¥å°†getter/setteræ‹·è´ã€‚å’ŒObject.assignä¸åŒã€‚

Object.assignå°†ä¸€ä¸ªå¯¹è±¡é™¤äº†getter/setterä»¥å¤–çš„éƒ½æ·±åº¦æ‹·è´äº†ã€‚

å°†åŸå¯¹è±¡Caræ‹·è´åˆ°ElectricCarï¼Œä½ å°±ä¼šå‘ç°Object.getOwnPropertyDescriptorsæ‹·è´äº† getterå’Œsetterï¼Œè€ŒObject.assignæ²¡æœ‰ã€‚

![objcopy](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/objcopy.png)

![objcopy2](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/objcopy2.png)

### å…è®¸åœ¨å‡½æ•°å‚æ•°æœ€åæ·»åŠ é€—å·

è¿™æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ”¹åŠ¨ï¼Œæ–¹ä¾¿gitç®—æ³•æ›´åŠ æ–¹ä¾¿åŒºåˆ†ä»£ç èŒè´£ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªè¯¦ç»†çš„ä¾‹å­æ¥ç†è§£ï¼š

![gitcomma](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/gitcomma.png)

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥åœ¨æœ€åæ·»åŠ é€—å·ã€‚

### Async/Await

è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»‹ç»çš„ç‰¹æ€§ä¸­æœ€æœ‰ç”¨çš„å°±å±è¿™ä¸ªåŠŸèƒ½äº†ã€‚Asyncå‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‘†è„±â€œå›è°ƒåœ°ç‹±â€ï¼Œå¹¶ä¸”æ•´ä¸ªä»£ç ä¼šæ›´åŠ ç®€æ´ã€‚

asyncå…³é”®å­—å‘Šè¯‰JavaScriptç¼–è¯‘å™¨å¯¹äºæ ‡å®šçš„å‡½æ•°è¦åŒºåˆ«å¯¹å¾…ã€‚å½“ç¼–è¯‘å™¨é‡åˆ°awaitå‡½æ•°çš„æ—¶å€™ä¼šæš‚åœã€‚å®ƒä¼šç­‰åˆ°awaitæ ‡å®šçš„å‡½æ•°è¿”å›çš„promiseã€‚è¯¥promiseè¦ä¹ˆå¾—åˆ°ç»“æœã€è¦ä¹ˆrejectã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒgetAmountå‡½æ•°è°ƒç”¨getUserå’ŒgetBankBalanceä¸¤ä¸ªå¼‚æ­¥å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨promiseæ¥å®ç°å®ƒï¼Œä¸è¿‡ç”¨async awaitæ›´åŠ ç®€æ´ã€‚

![async_await](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/async_await.png)

#### asyncå‡½æ•°è¿”å›Promise

å¦‚æœä½ æƒ³è·å–ä¸€ä¸ªasyncå‡½æ•°çš„ç»“æœï¼Œä½ éœ€è¦ä½¿ç”¨Promiseçš„thenè¯­æ³•ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³ç”¨console.logæ¥æ‰“å°doubleAndAddçš„ç»“æœï¼Œå¯ä»¥ä½¿ç”¨thenè¯­æ³•ï¼Œå°†console.logå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚

![async_promise](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/async_promise.png)

#### å¹¶è¡Œå¤„ç†

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¾ç¤ºåœ°è°ƒç”¨äº†awaitä¸¤æ¬¡ï¼Œå› ä¸ºæ¯æ¬¡éƒ½ç­‰å¾…äº†1ç§’é’Ÿï¼Œå› æ­¤æ€»è®¡ä¸¤ç§’é’Ÿã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Promise.allå‡½æ•°æ¥è®©ä»–ä»¬å¹¶è¡Œå¤„ç†ã€‚

![await_parallel](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/await_parallel.png)

#### async/awaitçš„é”™è¯¯å¤„ç†

æœ‰å¾ˆå¤šæ–¹æ³•æ¥å¤„ç†é”™è¯¯ã€‚

* æ–¹æ³•1ï¼šåœ¨å‡½æ•°ä¸­ä½¿ç”¨try-catch

![trycatch](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/trycatch.png)

* æ–¹æ³•2ï¼šcatchæ¯ä¸€ä¸ªawaitè¡¨è¾¾å¼

å› ä¸ºæ¯ä¸€ä¸ªawaitè¡¨è¾¾å¼éƒ½ä¼šè¿”å›Promiseï¼Œä½ å¯ä»¥å¯¹ä¸€ä¸ªè¿›è¡Œcatchæ“ä½œã€‚

![await_catch](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/await_catch.png)

* æ–¹æ³•3ï¼šcatchæ•´ä¸ªasync-awaitå‡½æ•°

![catch_all](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/catch_all.png)

[åŸæ–‡åœ°å€](https://blog.fundebug.com/2018/07/17/new_in_es16_17_18/)